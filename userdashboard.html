<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Admin Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --text:#111111; --blue:#0a53c1; --ink-20:#f4f6f8;
  --white:#ffffff; --border:#e6e8eb;
  --shadow:0 6px 24px rgba(0,0,0,.06);
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,sans-serif;background:var(--white);color:var(--text);}
.app{display:grid;grid-template-columns:240px 1fr;min-height:100vh}
.sidebar{border-right:1px solid var(--border);background:var(--white);transition:transform .3s}
.sidebar.open{transform:translateX(0)}
.sidebar:not(.open){transform:translateX(-100%)}
.brand{font-weight:800;text-transform:uppercase;padding:1rem;border-bottom:1px solid var(--border);}
nav{padding:1rem}
.nav-item{display:block;padding:.6rem;border-radius:8px;text-decoration:none;color:var(--text);}
.nav-item:hover,.nav-item.active{background:var(--ink-20)}
.main{display:grid;grid-template-rows:64px 1fr;min-width:0}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:0 1rem;border-bottom:1px solid var(--border);}
.search{display:flex;align-items:center;border:1px solid var(--border);border-radius:12px;padding:.4rem .7rem}
.search input{border:none;outline:none}
.btn{border:1px solid var(--text);background:transparent;padding:.4rem .8rem;border-radius:8px;cursor:pointer}
.content{padding:1rem;overflow:auto}
.grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}
.card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:1rem;box-shadow:var(--shadow)}
table{width:100%;border-collapse:collapse}
th,td{border-bottom:1px solid var(--border);padding:.6rem;text-align:left;vertical-align:middle}
th{font-size:.85rem;opacity:.7}
.overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);align-items:center;justify-content:center}
.modal{background:#fff;padding:1rem;border-radius:12px;min-width:300px}
.modal input,.modal select{display:block;width:100%;margin:.5rem 0;padding:.4rem}
.star{cursor:pointer;font-size:1.2rem;color:#ccc}
.star.active{color:gold}
.edit-icon, .delete-icon{cursor:pointer;margin-left:4px;}
</style>
</head>
<body>
<div class="app">
  <aside class="sidebar open" id="sidebar">
    <div class="brand">LGU 3 ADMIN SYSTEM</div>
   <nav>
    <a href="#" class="nav-item active" data-page="dashboard">Dashboard</a>
    <a href="#" class="nav-item" data-page="Vendor">Vendor Management</a>
    <a href="#" class="nav-item" data-page="Commodity">Commodity and Price Monitoring</a>
    <a href="#" class="nav-item" data-page="Supply">Supply Monitoring</a>
    <a href="#" class="nav-item" data-page="Inspection">Inspection and compliance</a>
    <a href="#" class="nav-item" data-page="Reports">Reports and Dashboard with AI analytic</a>
    <a href="#" class="nav-item" data-page="Settings">Settings</a>
    <a href="main.html" class="nav-item logout-btn" style="margin-top: 2rem; font-weight: bold;">Logout</a>
  </nav>
</aside>

  <section class="main">
    <header class="topbar">
      <div style="display:flex; align-items:center; gap:0.5rem;">
        <button class="btn" id="backBtn">‚Üê Back</button>
        <button class="btn" id="menuBtn">‚ò∞</button>
        <div class="search">üîé <input id="searchInput" type="search" placeholder="Search‚Ä¶"></div>
      </div>
      <div>
        <button class="btn" id="newBtn">+ New</button>
        <button class="btn" id="exportBtn">Export</button>
      </div>
    </header>

    <div class="content" id="contentArea"></div>
  </section>
</div>

<div class="overlay" id="overlay">
  <div class="modal">
    <h3 id="modalTitle">New Vendor Engagement</h3>
    <input id="dealInput" placeholder="Business Name" />
    <select id="stageInput">
      <option>‚úÖ Completed</option><option>‚úè In progress</option><option>‚è≥ Not started</option><option>‚õî Blocked</option>
    </select>
    <input id="valueInput" placeholder="Records of Payment" type="text" />
    <input id="ownerInput" placeholder="Owner" />
    <button class="btn" id="saveBtn">Save</button>
    <button class="btn" onclick="closeModal()">Cancel</button>
  </div>
</div>

<script>
const overlay = document.getElementById("overlay");
const contentArea = document.getElementById("contentArea");
let editingRow = null;
let pipelineChart = null;

const pages = {
  dashboard: `
    <h1>Dashboard</h1>
    <div class="grid">
      <div class="card"><h3>Price Variance / Cost Savings</h3><p>‚Ç±12,500</p><small>+8% vs last month</small></div>
      <div class="card"><h3>On-Time Delivery Rate</h3><p>92%</p><small>+3 pts</small></div>
      <div class="card"><h3>Defect Rate / Compliance Score</h3><p>2%</p><small>-1 pt</small></div>
      <div class="card"><h3>Vendor Performance Score</h3><p>87/100</p><small>Stable</small></div>
    </div>

    <div class="grid">
      <div class="card">
        <h3>Supply Chain Flow (Last 6 Weeks)</h3>
        <canvas id="pipelineChart" height="100"></canvas>
      </div>
      <div class="card" id="tasksCard">
        <h3>Tasks</h3>
        <ul id="taskList" style="list-style:none;padding:0;margin:0;">
          <li><input type="checkbox" /> Review vendor contracts <span class="edit-icon">‚úèÔ∏è</span> <span class="delete-icon">üóëÔ∏è</span></li>
          <li><input type="checkbox" checked /> Monitor deliveries <span class="edit-icon">‚úèÔ∏è</span> <span class="delete-icon">üóëÔ∏è</span></li>
          <li><input type="checkbox" /> Update compliance checklist <span class="edit-icon">‚úèÔ∏è</span> <span class="delete-icon">üóëÔ∏è</span></li>
          <li><input type="checkbox" /> Evaluate supplier pricing <span class="edit-icon">‚úèÔ∏è</span> <span class="delete-icon">üóëÔ∏è</span></li>
        </ul>
        <button id="addTaskBtn" class="btn" style="margin-top:.5rem;">‚ûï</button>
      </div>
    </div>

    <div class="card" style="margin-top:1rem;">
      <h3>Recent Vendor Engagements</h3>
      <table id="vendorEngagementsTable">
        <thead>
          <tr>
            <th>Type of Business</th><th>Status</th><th>Owner</th><th>Due Date</th><th>Records of Payment</th><th>Rating</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Takoyaki store</td><td>‚úÖ Completed</td><td>Gacusan, Aira Jane</td><td>03 Sep 2025</td><td>3,785.00</td><td data-stars="5"></td></tr>
          <tr><td>Sound equipment</td><td>‚úè In progress</td><td>Furigay, Neri Jane</td><td>10 Sep 2025</td><td>2,345</td><td data-stars="5"></td></tr>
          <tr><td>Tables and chairs</td><td>‚è≥ Not started</td><td>Pena, Rona Mae</td><td>04 Nov 2025</td><td>5,199</td><td data-stars="5"></td></tr>
          <tr><td>Atan's Meat Shop</td><td>‚õî Blocked</td><td>Dacoco, Jonathan</td><td>12 Mar 2025</td><td>1,870</td><td data-stars="5"></td></tr>
        </tbody>
      </table>
    </div>
  `,

  Vendor: `
    <h1>Vendor Management</h1>
    <input type="text" id="vendorSearch" placeholder="Search Vendor‚Ä¶" style="margin-bottom:1rem;width:100%;padding:.5rem;">
    <table id="vendorTable">
      <thead>
        <tr><th>Business Name</th><th>Status</th><th>Owner</th><th>Due Date</th><th>Records of Payment</th><th>Rating</th></tr>
      </thead>
      <tbody>
        <tr><td>Takoyaki store</td><td>‚úÖ Completed</td><td>Gacusan, Aira Jane</td><td>03 Sep 2025</td><td>3,785</td><td data-stars="5"></td></tr>
          <tr><td>Sound equipment</td><td>‚úè In progress</td><td>Furigay, Neri Jane</td><td>10 Sep 2025</td><td>2,345</td><td data-stars="5"></td></tr>
          <tr><td>Tables and chairs</td><td>‚è≥ Not started</td><td>Pena, Rona Mae</td><td>04 Nov 2025</td><td>5,199</td><td data-stars="5"></td></tr>
          <tr><td>Atan's Meat Shop</td><td>‚õî Blocked</td><td>Dacoco, Jonathan</td><td>12 Mar 2025</td><td>1,870</td><td data-stars="5"></td></tr>
      </tbody>
    </table>
  `,

  Supply: `
    <h1>Supply Monitoring</h1>
    <input type="text" id="supplySearch" placeholder="Search Supply‚Ä¶" style="margin-bottom:1rem;width:100%;padding:.5rem;">
    <table id="supplyTable">
      <thead>
        <tr><th>Business Name</th><th>Business Category</th><th>Supplier</th><th>Pick-up</th><th>Drop-off</th><th>Delivery Time</th><th>Supplier</th><th>Contact No.</th><th>Item Value</th><th>Quality</th><th>Status</th></tr>
      </thead>
      <tbody>
        <tr><td>Daisy Poultry</td><td>MEAT SHOP</td><td>James</td><td>Quezon City</td><td>Las Pi√±as</td><td>12:00 am - 2:00 pm</td><td>Francis</td><td>0970-567-1136</td><td>‚Ç±4,000.00</td><td data-stars="3"></td><td>‚õî Delayed</td></tr>
        <tr><td>Takoyaki Supplier</td><td>SUPPLIES SHOP</td><td>Maria</td><td>Makati</td><td>Pasig</td><td>7:00 am - 9:00 am</td><td>Kape Roasters</td><td>0917-888-9999</td><td>‚Ç±2,500.00</td><td data-stars="5"></td><td>‚úÖ Completed</td></tr>
        <tr><td>Catering Supplies</td><td>CATERING</td><td>Sofia</td><td>Taguig</td><td>Alabang</td><td>10:00 am - 12:00 pm</td><td>Bloom & Petal Farms</td><td>0920-555-4444</td><td>‚Ç±3,200.00</td><td data-stars="4"></td><td>‚úè In progress</td></tr>
        <tr><td>Party Rental</td><td>RENTAL SHOP</td><td>Ramon</td><td>Manila</td><td>Mandaluyong</td><td>3:00 am - 5:00 am</td><td>Flour Millers Inc.</td><td>0998-222-3333</td><td>‚Ç±5,000.00</td><td data-stars="5"></td><td>‚úÖ Completed</td></tr>
        </tbody>
    </table>
  `,

  Commodity: `<h1>Commodity and Price Monitoring</h1><p>Commodity content here...</p>`,
  Inspection: `<h1>Inspection and compliance</h1><p>Inspection content here...</p>`,
  Reports: `<h1>Reports and Dashboard with AI analytic</h1><p>Reports content here...</p>`,
  Settings: `<h1>Settings</h1><p>Settings content here...</p>`
};


function renderStars(td){
  const rating=parseInt(td.dataset.stars)||0;
  td.innerHTML="";
  for(let i=1;i<=5;i++){
    const star=document.createElement("span");
    star.className="star"+(i<=rating?" active":"");
    star.innerHTML="‚òÖ";
    star.onclick=()=>{td.dataset.stars=i;renderStars(td);};
    td.appendChild(star);
  }
}


function makeTableEditable(tableId, searchId){
  const table=document.getElementById(tableId);
  if(!table) return;
  table.querySelectorAll("td:not([data-stars])").forEach(td=>{
    td.onclick=()=>{
      if(td.querySelector("input")) return;
      const old=td.innerText;
      const input=document.createElement("input");
      input.value=old;
      td.innerHTML=""; td.appendChild(input); input.focus();
      input.onblur=()=>{td.innerText=input.value||old;};
      input.onkeydown=(e)=>{if(e.key==="Enter"){input.blur();}};
    };
  });
  table.querySelectorAll("td[data-stars]").forEach(td=>renderStars(td));
  if(searchId){
    document.getElementById(searchId).onkeyup=(e)=>{
      const term=e.target.value.toLowerCase();
      table.querySelectorAll("tbody tr").forEach(row=>{
        row.style.display=row.innerText.toLowerCase().includes(term)?"":"none";
      });
    };
  }
}


document.querySelectorAll(".nav-item").forEach(link=>{
  if(!link.classList.contains("logout-btn")){
    link.onclick=(e)=>{
      e.preventDefault();
      document.querySelectorAll(".nav-item").forEach(l=>l.classList.remove("active"));
      link.classList.add("active");
      const page=link.dataset.page;
      contentArea.innerHTML=pages[page]||`<h1>${page}</h1>`;
      if(page==="dashboard") initDashboard();
      if(page==="Vendor") makeTableEditable("vendorTable","vendorSearch");
      if(page==="Supply") makeTableEditable("supplyTable","supplySearch");
    };
  }
});

document.getElementById("backBtn").onclick=()=>window.history.back();
document.getElementById("menuBtn").onclick=()=>document.getElementById("sidebar").classList.toggle("open");


function openModal(row=null){
  overlay.style.display="flex"; editingRow=row;
  if(row){
    document.getElementById("modalTitle").innerText="Edit Vendor Engagement";
    document.getElementById("dealInput").value=row.cells[0].innerText;
    document.getElementById("stageInput").value=row.cells[1].innerText;
    document.getElementById("valueInput").value=row.cells[4].innerText;
    document.getElementById("ownerInput").value=row.cells[2].innerText;
  } else {
    document.getElementById("modalTitle").innerText="New Vendor Engagement";
    document.querySelectorAll(".modal input").forEach(i=>i.value="");
  }
}
function closeModal(){overlay.style.display="none";}


function attachTaskActions(){
  const taskList=document.getElementById("taskList"), addTaskBtn=document.getElementById("addTaskBtn");
  if(!taskList) return;document.querySelectorAll("#taskList li").forEach(li=>{
    const editIcon=li.querySelector(".edit-icon"),
          deleteIcon=li.querySelector(".delete-icon");
    editIcon.onclick=()=>{
      const newText=prompt("Edit Task", li.firstChild.textContent.trim());
      if(newText) li.firstChild.textContent=newText+" ";
    };
    deleteIcon.onclick=()=>{
      if(confirm("Delete this task?")) li.remove();
    };
  });
  addTaskBtn.onclick=()=>{
    const taskName=prompt("Enter new task:");
    if(taskName){
      const li=document.createElement("li");
      li.innerHTML=`<input type="checkbox" /> ${taskName} <span class="edit-icon">‚úèÔ∏è</span> <span class="delete-icon">üóëÔ∏è</span>`;
      taskList.appendChild(li);
      attachTaskActions();
    }
  };
}


function initDashboard(){
  const container=document.getElementById("contentArea");
  container.innerHTML=pages.dashboard;
  attachTaskActions();
  makeTableEditable("vendorEngagementsTable");

  const ctx=document.getElementById("pipelineChart");
  if(ctx){
    pipelineChart=new Chart(ctx,{
      type:"line",
      data:{
        labels:["Week 1","Week 2","Week 3","Week 4","Week 5","Week 6"],
        datasets:[{
          label:"Supply Chain Flow",
          data:[10,15,8,20,18,25],
          borderColor:"#0a53c1",
          backgroundColor:"rgba(10,83,193,0.2)",
          fill:true,
          tension:0.3
        }]
      }
    });
  }
}


document.getElementById("newBtn").onclick=()=>openModal();
document.getElementById("saveBtn").onclick=()=>{
  const table=document.querySelector("#vendorEngagementsTable tbody");
  if(!table) return;
  const deal=document.getElementById("dealInput").value,
        stage=document.getElementById("stageInput").value,
        value=document.getElementById("valueInput").value,
        owner=document.getElementById("ownerInput").value,
        due="Today";

  if(editingRow){
    editingRow.cells[0].innerText=deal;
    editingRow.cells[1].innerText=stage;
    editingRow.cells[2].innerText=owner;
    editingRow.cells[3].innerText=due;
    editingRow.cells[4].innerText=value;
  } else {
    const row=table.insertRow();
    row.innerHTML=`<td>${deal}</td><td>${stage}</td><td>${owner}</td><td>${due}</td><td>${value}</td><td data-stars="5"></td>`;
    renderStars(row.cells[5]);
  }
  closeModal();
};


initDashboard();
</script>
</body>
</html>
